<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="188icon.png" type="image/x-icon">
    <title>JavaScript Showcase</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
        }
        .example {
            display: flex;
            margin-bottom: 40px;
            background: #eee;
            padding: 20px;
            border-radius: 5px;
        }
        .demo {
            flex: 1;
            padding-right: 20px;
            text-align: center;
            justify-content: center;
        }
        .demo>#clock{
            margin-top: 100px;
        }
        .demo>h2 {
            text-align: left;
        }
        .demo>#container {
            justify-content: center;
            margin: auto auto;
            margin-top: 100px;
        }
        .explanation {
            flex: 1;
            padding-left: 20px;
            border-left: 1px solid #5a5a5a;
			overflow: auto;
        }
        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        pre {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 10px;
            overflow-x: auto;
        }
        #clock {
            font-size: 20px;
            font-family: Orbitron;
            text-align: center;
            letter-spacing: 3px;
        }
        .dark-mode-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            background-color: #333;
            border: 2px solid #f0f0f0;
            color: #f0f0f0;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 30px;
            transition: background-color 0.3s, color 0.3s;
        }
        .dark-mode .dark-mode-btn {
            background-color: #f0f0f0;
            border: 2px solid #333;
            color: #333;
            box-shadow: 0 0 80px white;
        }
        .dark-mode .dark-mode-btn:hover {
            background-color: #45a049;
            color: #e0e0e0;
        }
        .dark-mode {
            background-color: #151515;
            color: #e0e0e0;
        }
        .dark-mode .container {
            background-color: #555;
            color: #e0e0e0;
        }
        .dark-mode .container>h1 {
            color: #e0e0e0;
        }
        .dark-mode .example {
            background-color: #3a3a3a;
            color: #e0e0e0;
        }
        .dark-mode .demo {
            background-color: #3a3a3a;
            color: #e0e0e0;
        }
        .dark-mode .demo>h2 {
            color: #e0e0e0;
        }
        .dark-mode .explanation {
            background-color: #3a3a3a;
            color: #e0e0e0;
        }
        .dark-mode code {
            background-color: #2b2b2b;
            color: #c2bc45;
        }
        .dark-mode pre {
            background-color: #2b2b2b;
            color: #e0e0e0;
        }
        .bulb {
        width: 50px;
        height: 50px;
        background-color: #dfdfdf;
        border: 1px solid #adadad;
        border-radius: 50%;
        transition: all 0.3s ease;
        margin: 0 auto;
        position: relative;
      }
      .body-bulb {
        width: 25px;
        height: 30px;
        background-color: #545252;
        margin: auto;
        margin-top: -10px;
        margin-bottom: 30px;
        border-bottom-right-radius: 15px;
        border-bottom-left-radius: 15px;
      }
      .bulb.on {
        background-color: yellow;
        box-shadow: 0 0 50px yellow;
      }

    </style>
</head>
<body>
    <button class="dark-mode-btn" onclick="goDark()">Nền Sáng/Tối</button>

    <div class="container">
        <h1>JavaScript Showcase</h1>
        
        <div class="example">
            <div class="demo">
                <h2>1. Thay đổi nội dung</h2>
                <p id="demo">Nhấn nút để thay đổi nội dung này.</p>
                <button onclick="changeText()">Thay đổi nội dung</button>
                <hr style="opacity: 0">
                <p id="demo">Nhấn nút để bật/tắt bóng đèn.</p>
                <div class="bulb" id="bulb"></div>
                <div class="body-bulb"></div>
                <button onclick="toggleLight()">Bật/Tắt đèn</button>
            </div>
            <div class="explanation">
                <h3>Giải thích</h3>
                <p>Trong ví dụ này, chúng ta sử dụng JavaScript để thay đổi nội dung của một phần tử HTML khi người dùng nhấn nút.</p>
                <pre><code>
function changeText() {
    document.getElementById("demo").innerHTML = "Nội dung đã được thay đổi!";
}
                </code></pre>
                <p>Hàm <code>changeText()</code> sử dụng <code>document.getElementById()</code> để tìm phần tử có id là "demo", sau đó thay đổi nội dung HTML của nó bằng cách gán giá trị mới cho thuộc tính <code>innerHTML</code>.</p>
            </div>
        </div>

        <div class="example">
            <div class="demo">
                <h2>2. Tính toán đơn giản</h2>
                <p>Nhập hai số để cộng:</p>
                <input type="number" id="num1" placeholder="Số thứ nhất">
                <input type="number" id="num2" placeholder="Số thứ hai">
                <button onclick="addNumbers()">Cộng</button>
                <p id="result"></p>
            </div>
            <div class="explanation">
                <h3>Giải thích</h3>
                <p>Ví dụ này minh họa cách JavaScript có thể thực hiện các phép tính và tương tác với đầu vào của người dùng.</p>
                <pre><code>
function addNumbers() {
    var num1 = parseFloat(document.getElementById("num1").value);
    var num2 = parseFloat(document.getElementById("num2").value);
    var sum = num1 + num2;
    document.getElementById("result").innerHTML = "Kết quả: " + sum;
}
                </code></pre>
                <p>Hàm <code>addNumbers()</code> lấy giá trị từ hai trường input, chuyển đổi chúng thành số thực với <code>parseFloat()</code>, thực hiện phép cộng, và hiển thị kết quả.</p>
            </div>
        </div>

        <div class="example">
            <div class="demo">
                <h2>3. Đồng hồ thời gian thực</h2>
                <p id="clock"></p>
            </div>
            <div class="explanation">
                <h3>Giải thích</h3>
                <p>Đây là một ví dụ về cách JavaScript có thể cập nhật nội dung trang web một cách liên tục, tạo ra một đồng hồ thời gian thực.</p>
                <pre><code>
function updateClock() {
    var date = new Date();
    var h = date.getHours(); // 0 - 23
    var m = date.getMinutes(); // 0 - 59
    var s = date.getSeconds(); // 0 - 59
    var session = "AM";
    
    if(h == 0){
        h = 12;
    }
    
    if(h > 12){
        h = h - 12;
        session = "PM";
    }
    
    h = (h < 10) ? "0" + h : h;
    m = (m < 10) ? "0" + m : m;
    s = (s < 10) ? "0" + s : s;
    
    var time = h + ":" + m + ":" + s + " " + session;
    document.getElementById("clock").innerText = time;
    document.getElementById("clock").textContent = time;
    
    setTimeout(updateClock, 1000);
}

updateClock();
                </code></pre>
                <p>Hàm <code>updateClock()</code> lấy thời gian hiện tại, định dạng nó, và cập nhật nội dung của phần tử "clock". Hàm <code>setTimeout()</code> được sử dụng để gọi lại <code>updateClock()</code> sau mỗi 1000 mili giây (1 giây), tạo ra hiệu ứng cập nhật liên tục.</p>
            </div>
        </div>
		
		<div class="example">
			<div class="demo">
				<h2>4. Các hình tròn di chuyển theo vị trí con trỏ</h2>
				<p>Di chuyển chuột vào vùng dưới đây để xem hiệu ứng các hình tròn di chuyển theo vị trí con trỏ.</p>
				<div id="container" style="width: 500px; height: 500px; background-color: #ddd; position: relative; border-radius: 25px;">
					<div class="square" id="square1" style="width: 150px; height: 150px; background-color: #3498db; position: absolute; transition: all 0.5s ease; border-radius: 40%;"></div>
					<div class="square" id="square2" style="width: 150px; height: 150px; background-color: #3498db; position: absolute; transition: all 0.5s ease; border-radius: 40%;"></div>
					<div class="square" id="square3" style="width: 150px; height: 150px; background-color: #3498db; position: absolute; transition: all 0.5s ease; border-radius: 40%;"></div>
					<div id="cursor" style="width: 20px; height: 20px; border-radius: 50%; background-color: rgba(231, 76, 60, 0.7); position: absolute; pointer-events: none;"></div>
				</div>
			</div>
			<div class="explanation">
				<h3>Giải thích</h3>
				<p>Ví dụ này hiển thị các hình tròn di chuyển khi con trỏ đến gần. Chúng ta sử dụng JavaScript để tính toán khoảng cách giữa con trỏ và các hình tròn, sau đó di chuyển các hình tròn đến vị trí khác nếu chúng quá gần.</p>
				
				<h4>1. Lấy các phần tử HTML</h4>
                <pre><code>
const container = document.getElementById('container');
const squares = document.querySelectorAll('.square');
const cursor = document.getElementById('cursor');</code></pre>
                <p><b>container</b>: Lấy phần tử HTML có <code>id</code> là <code>container</code>, đây là phần tử chứa các hình vuông.</p>
                <p><b>squares</b>: Lấy tất cả các phần tử có class là <code>square</code>, tương ứng với các hình vuông cần di chuyển.</p>
                <p><b>cursor</b>: Lấy phần tử có <code>id</code> là <code>cursor</code>, để theo dõi và hiển thị vị trí của con trỏ chuột.</p>

                <h4>2. Định nghĩa các giá trị cấu hình</h4>
                <pre><code>const margin = 25, containerSize = 500, squareSize = 150;</code></pre>
                <p><b>margin</b>: Khoảng cách giữa các hình vuông và cạnh của khung chứa.</p>
                <p><b>containerSize</b>: Kích thước của khung chứa (chiều dài và chiều rộng đều là 500px).</p>
                <p><b>squareSize</b>: Kích thước của mỗi hình vuông (150px).</p>

                <h4>3. Tạo mảng lưu các vị trí góc</h4>
                <pre><code>
const cornerPositions = [
    { x: margin, y: margin },
    { x: containerSize - squareSize - margin, y: margin },
    { x: margin, y: containerSize - squareSize - margin },
    { x: containerSize - squareSize - margin, y: containerSize - squareSize - margin }
];
                </code></pre>
                <p><b>cornerPositions</b>: Mảng chứa các vị trí góc (tọa độ <code>x</code> và <code>y</code>) của các hình vuông trong khung chứa. Các vị trí này tương ứng với 4 góc của khung chứa:</p>
                <ul>
                    <li>Góc trên bên trái</li>
                    <li>Góc trên bên phải</li>
                    <li>Góc dưới bên trái</li>
                    <li>Góc dưới bên phải</li>
                </ul>

                <h4>4. Mảng lưu các vị trí hiện tại của các hình vuông</h4>
                <pre><code>
let squarePositions = [0, 1, 2];
                </code></pre>
                <p><b>squarePositions</b>: Mảng chứa các chỉ mục tương ứng với các vị trí hiện tại của các hình vuông. Các giá trị này là chỉ số của các góc trong mảng <code>cornerPositions</code>. Ban đầu, các hình vuông chiếm ba trong bốn góc, chỉ số 0, 1, và 2.</p>

                <h4>5. Cập nhật vị trí của các hình vuông</h4>
                <pre><code>
const updateSquarePositions = () => {
    squares.forEach((square, index) => {
        const { x, y } = cornerPositions[squarePositions[index]];
        square.style.left = `${x}px`;
        square.style.top = `${y}px`;
    });
};
                </code></pre>
                <p><b>updateSquarePositions</b>: Hàm này đặt lại vị trí của các hình vuông theo các chỉ số hiện tại của chúng trong <code>squarePositions</code>. Với mỗi hình vuông, nó lấy tọa độ từ mảng <code>cornerPositions</code> và đặt lại vị trí bằng cách cập nhật CSS <code>left</code> và <code>top</code>.</p>

                <h4>6. Di chuyển các hình vuông tránh con trỏ chuột</h4>
                <pre><code>
const moveSquaresAwayFromCursor = (cursorX, cursorY) => {
    const availableCorners = [0, 1, 2, 3].filter(corner => !squarePositions.includes(corner));
    if (availableCorners.length === 0) return;

    const approachingSquareIndex = squarePositions.findIndex((pos) => {
        const { x, y } = cornerPositions[pos];
        const distance = Math.hypot(cursorX - (x + squareSize / 2), cursorY - (y + squareSize / 2));
        return distance < 120;
    });

    if (approachingSquareIndex !== -1) {
        const [emptyCorner] = availableCorners;
        const swapIndex = squarePositions.find((_, idx) => idx !== approachingSquareIndex);
        squarePositions[squarePositions.indexOf(swapIndex)] = emptyCorner;
        squarePositions[approachingSquareIndex] = swapIndex;
        updateSquarePositions();
    }
};
                </code></pre>
                <p><b>moveSquaresAwayFromCursor</b>: Hàm này xử lý việc di chuyển các hình vuông khi con trỏ chuột đến gần chúng.</p>
                <ul>
                    <li><b>availableCorners</b>: Lọc ra những vị trí góc còn trống (chưa có hình vuông nào).</li>
                    <li><b>approachingSquareIndex</b>: Tìm chỉ số của hình vuông gần nhất với con trỏ chuột (nếu khoảng cách giữa hình vuông và con trỏ nhỏ hơn 120px).</li>
                    <li><b>Math.hypot</b>: Hàm tính toán khoảng cách giữa con trỏ chuột và tâm của hình vuông.</li>
                    <li>Nếu một hình vuông đang gần con trỏ chuột, nó sẽ di chuyển hình vuông này đến góc trống và cập nhật vị trí của các hình vuông.</li>
                </ul>

                <h4>7. Sự kiện di chuyển chuột (mousemove)</h4>
                <pre><code>
container.addEventListener('mousemove', (e) => {
    const { left, top } = container.getBoundingClientRect();
    const x = e.clientX - left, y = e.clientY - top;
    cursor.style.left = `${x - 10}px`;
    cursor.style.top = `${y - 10}px`;
    moveSquaresAwayFromCursor(x, y);
});
                </code></pre>
                <p>Khi con trỏ chuột di chuyển trong vùng chứa (<code>container</code>):</p>
                <ul>
                    <li>Lấy tọa độ chuột tương đối so với khung chứa.</li>
                    <li>Cập nhật vị trí của con trỏ hiển thị (<code>cursor</code>).</li>
                    <li>Gọi hàm <code>moveSquaresAwayFromCursor</code> để di chuyển các hình vuông nếu cần.</li>
                </ul>

                <h4>8. Sự kiện khi chuột rời khỏi hoặc đi vào vùng chứa</h4>
                <pre><code>
container.addEventListener('mouseleave', () => cursor.style.display = 'none');
container.addEventListener('mouseenter', () => cursor.style.display = 'block');
                </code></pre>
                <p><b>mouseleave</b>: Ẩn con trỏ khi chuột rời khỏi khung chứa.</p>
                <p><b>mouseenter</b>: Hiển thị lại con trỏ khi chuột quay trở lại.</p>

                <h4>9. Cập nhật vị trí ban đầu của các hình vuông</h4>
                 <pre><code>
updateSquarePositions();
                </code></pre>
                <p>Cuối cùng, khi trang được tải, hàm <code>updateSquarePositions</code> được gọi để thiết lập vị trí ban đầu của các hình vuông.</p>
			</div>

		</div>
    </div>

    <script>
        function goDark() {
            var element = document.body;
            element.classList.toggle("dark-mode");
        } 
        function changeText() {
            document.getElementById("demo").innerHTML = "Nội dung đã được thay đổi!";
        }

        function toggleLight() {
          const bulb = document.getElementById("bulb");
          bulb.classList.toggle("on");
        }

        function addNumbers() {
            var num1 = parseFloat(document.getElementById("num1").value);
            var num2 = parseFloat(document.getElementById("num2").value);
            var sum = num1 + num2;
            document.getElementById("result").innerHTML = "Kết quả: " + sum;
        }

        function updateClock() {
            var date = new Date();
            var h = date.getHours(); // 0 - 23
            var m = date.getMinutes(); // 0 - 59
            var s = date.getSeconds(); // 0 - 59
            var session = "AM";
            
            if(h == 0){
                h = 12;
            }
            
            if(h > 12){
                h = h - 12;
                session = "PM";
            }
            
            h = (h < 10) ? "0" + h : h;
            m = (m < 10) ? "0" + m : m;
            s = (s < 10) ? "0" + s : s;
            
            var time = h + ":" + m + ":" + s + " " + session;
            document.getElementById("clock").innerText = time;
            document.getElementById("clock").textContent = time;
            
            setTimeout(updateClock, 1000);
        }

        updateClock();
    </script>
	
	<script>
        const container = document.getElementById('container');
        const squares = document.querySelectorAll('.square');
        const cursor = document.getElementById('cursor');
    
        const margin = 25, containerSize = 500, squareSize = 150;
        const cornerPositions = [
            { x: margin, y: margin },
            { x: containerSize - squareSize - margin, y: margin },
            { x: margin, y: containerSize - squareSize - margin },
            { x: containerSize - squareSize - margin, y: containerSize - squareSize - margin }
        ];
    
        let squarePositions = [0, 1, 2];
    
        const updateSquarePositions = () => {
            squares.forEach((square, index) => {
                const { x, y } = cornerPositions[squarePositions[index]];
                square.style.left = `${x}px`;
                square.style.top = `${y}px`;
            });
        };
    
        const moveSquaresAwayFromCursor = (cursorX, cursorY) => {
            const availableCorners = [0, 1, 2, 3].filter(corner => !squarePositions.includes(corner));
            if (availableCorners.length === 0) return;
    
            const approachingSquareIndex = squarePositions.findIndex((pos) => {
                const { x, y } = cornerPositions[pos];
                const distance = Math.hypot(cursorX - (x + squareSize / 2), cursorY - (y + squareSize / 2));
                return distance < 120;
            });
    
            if (approachingSquareIndex !== -1) {
                const [emptyCorner] = availableCorners;
                const swapIndex = squarePositions.find((_, idx) => idx !== approachingSquareIndex);
                squarePositions[squarePositions.indexOf(swapIndex)] = emptyCorner;
                squarePositions[approachingSquareIndex] = swapIndex;
                updateSquarePositions();
            }
        };
    
        container.addEventListener('mousemove', (e) => {
            const { left, top } = container.getBoundingClientRect();
            const x = e.clientX - left, y = e.clientY - top;
            cursor.style.left = `${x - 10}px`;
            cursor.style.top = `${y - 10}px`;
            moveSquaresAwayFromCursor(x, y);
        });
    
        container.addEventListener('mouseleave', () => cursor.style.display = 'none');
        container.addEventListener('mouseenter', () => cursor.style.display = 'block');
    
        updateSquarePositions();
    </script>
    
</body>
</html>
