<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="188icon.png" type="image/x-icon">
    <title>JavaScript Showcase</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 78%;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
        }
        .example {
            display: flex;
            margin-bottom: 40px;
            background: #eee;
            padding: 20px;
            border-radius: 5px;
        }
        .demo {
            flex: 1;
            padding-right: 20px;
            text-align: center;
            justify-content: center;
        }
        .demo>#clock{
            margin-top: 100px;
        }
        .demo>h2 {
            text-align: left;
        }
        .demo>#container {
            justify-content: center;
            margin: auto auto;
            margin-top: 100px;
        }
        .explanation {
            flex: 1;
            padding-left: 20px;
            border-left: 1px solid #5a5a5a;
            overflow: auto;
        }
        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        pre {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 10px;
            overflow-x: auto;
        }
        #clock {
            font-size: 20px;
            font-family: Orbitron;
            text-align: center;
            letter-spacing: 3px;
        }
        .dark-mode-btn {
            position: fixed;
            top: 20px;
            right: 10px;
            display: flex;
            align-items: center;
            background-color: #333;
            border: 2px solid #f0f0f0;
            color: #f0f0f0;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 30px;
            transition: background-color 0.3s, color 0.3s;
            max-width: 10%;
        }
        .dark-mode .dark-mode-btn {
            background-color: #f0f0f0;
            border: 2px solid #333;
            color: #333;
            box-shadow: 0 0 80px white;
        }
        .dark-mode .dark-mode-btn:hover {
            background-color: #45a049;
            color: #e0e0e0;
        }
        .dark-mode {
            background-color: #151515;
            color: #e0e0e0;
        }
        .dark-mode .container {
            background-color: #555;
            color: #e0e0e0;
        }
        .dark-mode .container>h1 {
            color: #e0e0e0;
        }
        .dark-mode .example {
            background-color: #3a3a3a;
            color: #e0e0e0;
        }
        .dark-mode .demo {
            background-color: #3a3a3a;
            color: #e0e0e0;
        }
        .dark-mode .demo>h2 {
            color: #e0e0e0;
        }
        .dark-mode .explanation {
            background-color: #3a3a3a;
            color: #e0e0e0;
        }
        .dark-mode code {
            background-color: #2b2b2b;
            color: #19ffcd;
        }
        .dark-mode pre {
            background-color: #2b2b2b;
            color: #e0e0e0;
        }
        .bulb {
            width: 50px;
            height: 50px;
            background-color: #dfdfdf;
            border: 1px solid #adadad;
            border-radius: 50%;
            transition: all 0.3s ease;
            margin: 0 auto;
            position: relative;
        }
        .body-bulb {
            width: 25px;
            height: 30px;
            background-color: #545252;
            margin: auto;
            margin-top: -10px;
            margin-bottom: 30px;
            border-bottom-right-radius: 15px;
            border-bottom-left-radius: 15px;
        }
        .bulb.on {
            background-color: yellow;
            box-shadow: 0 0 50px yellow;
        }
    </style>
</head>
<body>
    <button class="dark-mode-btn" onclick="goDark()">Nền Sáng/Tối</button>

    <div class="container">
        <h1><img src="188icon.png"> JavaScript Nhom 2</h1>
        
        <div class="example">
            <div class="demo">
                <h2>1. Thay đổi nội dung</h2>
                <p id="demo">Nhấn nút để thay đổi nội dung này.</p>
                <button onclick="changeText()">Thay đổi nội dung</button>
                <hr style="opacity: 0">
                
            </div>
            <div class="explanation">
                <h3>Giải thích</h3>
                <p><strong>Ứng dụng:</strong> <em>Thao tác DOM</em></p>
                <p>Trong ví dụ này, chúng ta sử dụng JavaScript để thay đổi nội dung của một phần tử HTML khi người dùng nhấn nút.</p>
                <pre><code>
function changeText() {
    document.getElementById("demo").innerHTML = "Nội dung đã được thay đổi!";
}
                </code></pre>
                <p>Hàm <code>changeText()</code> sử dụng <code>document.getElementById()</code> để tìm phần tử có id là "demo", sau đó thay đổi nội dung HTML của nó bằng cách gán giá trị mới cho thuộc tính <code>innerHTML</code>.</p>
            </div>
        </div>

        <div class="example">
            <div class="demo">
                <h2>2. Thay đổi thuộc tính</h2>
                <p id="demo">Nhấn nút để bật/tắt bóng đèn.</p>
                <div class="bulb" id="bulb"></div>
                <div class="body-bulb"></div>
                <button onclick="toggleLight()">Bật/Tắt đèn</button>
            </div>
            <div class="explanation">
                <h3>Giải thích</h3>
                <p><strong>Ứng dụng:</strong> <em>Thao tác, biến đổi lớp</em></p>
                <p>Ví dụ này minh họa việc bật và tắt bóng đèn bằng cách sử dụng JavaScript để thay đổi lớp CSS của một phần tử HTML.</p>
                <pre><code>
function toggleLight() {
    const bulb = document.getElementById("bulb");
    bulb.classList.toggle("on");
}
                </code></pre>
                <p>Hàm <code>toggleLight()</code> tìm phần tử có <code>id</code> là "bulb" và sử dụng <code>classList.toggle()</code> để thêm hoặc loại bỏ lớp <code>on</code>, thay đổi trạng thái bóng đèn.</p>
            </div>
        </div>

        <div class="example">
            <div class="demo">
                <h2>3. Tính toán đơn giản</h2>
                <p>Nhập hai số để cộng:</p>
                <input type="number" id="num1" placeholder="Số thứ nhất">
                <input type="number" id="num2" placeholder="Số thứ hai">
                <button onclick="addNumbers()">Cộng</button>
                <p id="result"></p>
            </div>
            <div class="explanation">
                <p><strong>Ứng dụng:</strong> <em>Xử lý sự kiện và phép toán số học</em></p>
                <h3>Giải thích</h3>
                <p>Ví dụ này minh họa cách JavaScript có thể thực hiện các phép tính và tương tác với đầu vào của người dùng.</p>
                <pre><code>
function addNumbers() {
    var num1 = parseFloat(document.getElementById("num1").value);
    var num2 = parseFloat(document.getElementById("num2").value);
    var sum = num1 + num2;
    document.getElementById("result").innerHTML = "Kết quả: " + sum;
}
                </code></pre>
                <p>Hàm <code>addNumbers()</code> lấy giá trị từ hai trường input, chuyển đổi chúng thành số thực với <code>parseFloat()</code>, thực hiện phép cộng, và hiển thị kết quả.</p>
            </div>
        </div>

        <div class="example">
            <div class="demo">
                <h2>4. Đồng hồ thời gian thực</h2>
                <p id="clock"></p>
            </div>
            <div class="explanation">
                <p><strong>Ứng dụng:</strong> <em>Bộ hẹn giờ và đối tượng Date</em></p>
                <h3>Giải thích</h3>
                <p>Ví dụ này hiển thị một đồng hồ thời gian thực, được cập nhật liên tục bằng JavaScript. Hãy phân tích chi tiết từng phần của mã:</p>
                <pre><code>
function updateClock() {
    var date = new Date();
    var h = date.getHours(); // 0 - 23
    var m = date.getMinutes(); // 0 - 59
    var s = date.getSeconds(); // 0 - 59
    var session = "AM";
    
    if(h == 0){
        h = 12;
    }
    
    if(h > 12){
        h = h - 12;
        session = "PM";
    }
    
    h = (h < 10) ? "0" + h : h;
    m = (m < 10) ? "0" + m : m;
    s = (s < 10) ? "0" + s : s;
    
    var time = h + ":" + m + ":" + s + " " + session;
    document.getElementById("clock").innerText = time;
    document.getElementById("clock").textContent = time;
    
    setTimeout(updateClock, 1000);
}

updateClock();
                </code></pre>
                <p>Giải thích chi tiết:</p>
                <ol>
                    <li><code>var date = new Date();</code>: Tạo một đối tượng Date mới, đại diện cho thời gian hiện tại.</li>
                    <li><code>var h = date.getHours();</code>: Lấy giờ hiện tại (0-23).</li>
                    <li><code>var m = date.getMinutes();</code>: Lấy phút hiện tại (0-59).</li>
                    <li><code>var s = date.getSeconds();</code>: Lấy giây hiện tại (0-59).</li>
                    <li><code>var session = "AM";</code>: Mặc định là buổi sáng (AM).</li>
                    <li>Điều chỉnh giờ:
                        <ul>
                            <li>Nếu giờ là 0, đặt lại thành 12 (12 AM).</li>
                            <li>Nếu giờ lớn hơn 12, trừ đi 12 và đổi session thành "PM".</li>
                        </ul>
                    </li>
                    <li>Thêm số 0 đứng trước nếu giờ, phút hoặc giây nhỏ hơn 10.</li>
                    <li>Tạo chuỗi thời gian dạng "HH:MM:SS AM/PM".</li>
                    <li>Cập nhật nội dung của phần tử có id "clock" bằng chuỗi thời gian.</li>
                    <li><code>setTimeout(updateClock, 1000);</code>: Đặt hẹn giờ để gọi lại hàm <code>updateClock()</code> sau 1 giây (1000 ms).</li>
                </ol>
                <p>Hàm <code>updateClock()</code> được gọi lần đầu tiên để khởi động đồng hồ. Sau đó, nó tự gọi lại mỗi giây thông qua <code>setTimeout()</code>, tạo ra một vòng lặp liên tục cập nhật thời gian.</p>
            </div>
        </div>

        <div class="example">
            <div class="demo">
                <h2>5. Các hình tròn di chuyển theo vị trí con trỏ</h2>
                <p>Di chuyển chuột vào vùng dưới đây để xem hiệu ứng các hình tròn di chuyển theo vị trí con trỏ.</p>
                <div id="container" style="width: 500px; height: 500px; background-color: #ddd; position: relative; border-radius: 25px;">
                    <div class="square" id="square1" style="width: 150px; height: 150px; background-color: #3498db; position: absolute; transition: all 0.5s ease; border-radius: 40%;"></div>
                    <div class="square" id="square2" style="width: 150px; height: 150px; background-color: #3498db; position: absolute; transition: all 0.5s ease; border-radius: 40%;"></div>
                    <div class="square" id="square3" style="width: 150px; height: 150px; background-color: #3498db; position: absolute; transition: all 0.5s ease; border-radius: 40%;"></div>
                    <div id="cursor" style="width: 20px; height: 20px; border-radius: 50%; background-color: rgba(231, 76, 60, 0.7); position: absolute; pointer-events: none;"></div>
                </div>
            </div>
            <div class="explanation">
                <h3>Giải thích</h3>
                <p><strong>Ứng dụng:</strong> <em>Xử lí sự kiện và định vị động cho phần tử</em></p>
                <p>Ví dụ này hiển thị các hình tròn di chuyển khi con trỏ đến gần. Chúng ta sử dụng JavaScript để tính toán khoảng cách giữa con trỏ và các hình tròn, sau đó di chuyển các hình tròn đến vị trí khác nếu chúng quá gần. Dưới đây là giải thích chi tiết về từng phần của mã:</p>
                <pre><code>
const container = document.getElementById('container');
const squares = document.querySelectorAll('.square');
const cursor = document.getElementById('cursor');

const margin = 25, containerSize = 500, squareSize = 150;
const cornerPositions = [
    { x: margin, y: margin },
    { x: containerSize - squareSize - margin, y: margin },
    { x: margin, y: containerSize - squareSize - margin },
    { x: containerSize - squareSize - margin, y: containerSize - squareSize - margin }
];

let squarePositions = [0, 1, 2];
                </code></pre>
                <p>Đoạn mã trên khởi tạo các biến và hằng số cần thiết:</p>
                <ul>
                    <li><code>container</code>, <code>squares</code>, và <code>cursor</code> là các tham chiếu đến các phần tử DOM. <code>container</code> là phần tử chứa, <code>squares</code> là một NodeList chứa tất cả các hình vuông, và <code>cursor</code> là phần tử đại diện cho con trỏ chuột.</li>
                    <li><code>margin</code> (25px) là khoảng cách từ cạnh container đến hình vuông, <code>containerSize</code> (500px) là kích thước của container, và <code>squareSize</code> (150px) là kích thước của mỗi hình vuông.</li>
                    <li><code>cornerPositions</code> là một mảng chứa tọa độ của bốn góc trong container. Mỗi góc được biểu diễn bằng một đối tượng có thuộc tính x và y.</li>
                    <li><code>squarePositions</code> là một mảng theo dõi vị trí hiện tại của ba hình vuông, sử dụng chỉ số của các góc (0, 1, 2 tương ứng với ba góc đầu tiên).</li>
                </ul>
                <pre><code>
const updateSquarePositions = () => {
    squares.forEach((square, index) => {
        const { x, y } = cornerPositions[squarePositions[index]];
        square.style.left = `${x}px`;
        square.style.top = `${y}px`;
    });
};
                </code></pre>
                <p>Hàm <code>updateSquarePositions</code> cập nhật vị trí của các hình vuông trên màn hình:</p>
                <ul>
                    <li>Nó lặp qua mỗi hình vuông trong <code>squares</code>.</li>
                    <li>Với mỗi hình vuông, nó lấy tọa độ x và y từ <code>cornerPositions</code> dựa trên chỉ số trong <code>squarePositions</code>.</li>
                    <li>Sau đó, nó cập nhật thuộc tính <code>style.left</code> và <code>style.top</code> của hình vuông để di chuyển nó đến vị trí mới.</li>
                </ul>
                <pre><code>
const moveSquaresAwayFromCursor = (cursorX, cursorY) => {
    const availableCorners = [0, 1, 2, 3].filter(corner => !squarePositions.includes(corner));
    if (availableCorners.length === 0) return;

    const approachingSquareIndex = squarePositions.findIndex((pos) => {
        const { x, y } = cornerPositions[pos];
        const distance = Math.hypot(cursorX - (x + squareSize / 2), cursorY - (y + squareSize / 2));
        return distance < 120;
    });

    if (approachingSquareIndex !== -1) {
        const [emptyCorner] = availableCorners;
        const swapIndex = squarePositions.find((_, idx) => idx !== approachingSquareIndex);
        squarePositions[squarePositions.indexOf(swapIndex)] = emptyCorner;
        squarePositions[approachingSquareIndex] = swapIndex;
        updateSquarePositions();
    }
};
                </code></pre>
                <p>Hàm <code>moveSquaresAwayFromCursor</code> thực hiện các bước sau:</p>
                <ol>
                    <li>Xác định các góc còn trống bằng cách lọc ra các góc không có trong <code>squarePositions</code>.</li>
                    <li>Nếu không có góc trống, hàm kết thúc.</li>
                    <li>Tìm hình vuông gần con trỏ nhất bằng cách:
                        <ul>
                            <li>Lặp qua các vị trí trong <code>squarePositions</code>.</li>
                            <li>Tính khoảng cách từ tâm của mỗi hình vuông đến con trỏ sử dụng công thức Pythagoras (<code>Math.hypot</code>).</li>
                            <li>Kiểm tra xem khoảng cách có nhỏ hơn 120px không.</li>
                        </ul>
                    </li>
                    <li>Nếu tìm thấy hình vuông gần (khoảng cách < 120px):
                        <ul>
                            <li>Chọn một góc trống ngẫu nhiên.</li>
                            <li>Tìm một hình vuông khác để hoán đổi vị trí.</li>
                            <li>Cập nhật <code>squarePositions</code> để phản ánh sự thay đổi vị trí.</li>
                            <li>Gọi <code>updateSquarePositions()</code> để cập nhật vị trí trên màn hình.</li>
                        </ul>
                    </li>
                </ol>
                <pre><code>
container.addEventListener('mousemove', (e) => {
    const { left, top } = container.getBoundingClientRect();
    const x = e.clientX - left, y = e.clientY - top;
    cursor.style.left = `${x - 10}px`;
    cursor.style.top = `${y - 10}px`;
    moveSquaresAwayFromCursor(x, y);
});

container.addEventListener('mouseleave', () => cursor.style.display = 'none');
container.addEventListener('mouseenter', () => cursor.style.display = 'block');

updateSquarePositions();
                </code></pre>
                <p>Cuối cùng, chúng ta thêm các event listener:</p>
                <ul>
                    <li><code>mousemove</code>: 
                        <ul>
                            <li>Tính toán vị trí của con trỏ trong container bằng cách trừ vị trí của container khỏi vị trí của chuột.</li>
                            <li>Cập nhật vị trí của phần tử <code>cursor</code> để theo dõi con trỏ (trừ 10px để căn giữa).</li>
                            <li>Gọi <code>moveSquaresAwayFromCursor</code> với vị trí mới của con trỏ.</li>
                        </ul>
                    </li>
                    <li><code>mouseleave</code>: Ẩn phần tử <code>cursor</code> khi chuột rời khỏi container.</li>
                    <li><code>mouseenter</code>: Hiện phần tử <code>cursor</code> khi chuột vào container.</li>
                </ul>
                <p>Hàm <code>updateSquarePositions()</code> được gọi ở cuối để khởi tạo vị trí ban đầu của các hình vuông khi trang web được tải.</p>
                <p>Tổng thể, mã này tạo ra một hiệu ứng tương tác thú vị, nơi các hình vuông "né tránh" con trỏ chuột, tạo cảm giác chúng có ý thức và phản ứng với người dùng.</p>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="squares-transtioning.js"></script>
</body>
</html>
